Bootstrap: docker
From: python:3.10-slim

%labels
    Author ywatanabe
    Version 1.0.0
    Description SciTeX Core - Minimal Python environment for scitex.project

%help
    SciTeX Core Container

    Includes:
    - Python 3.10
    - Essential scientific computing libraries (numpy, scipy, pandas)
    - Basic visualization (matplotlib, seaborn)
    - Core utilities (click, PyYAML, requests)

    Size: ~500MB

    Usage:
        singularity exec scitex-core.sif python your_script.py
        singularity run scitex-core.sif your_script.py

%post
    # Update package list
    apt-get update
    apt-get install -y --no-install-recommends \
        gcc \
        g++ \
        git \
        && rm -rf /var/lib/apt/lists/*

    # Install Python packages
    pip install --no-cache-dir --upgrade pip setuptools wheel

    # Core scientific computing
    pip install --no-cache-dir \
        numpy>=1.24.0 \
        scipy>=1.10.0 \
        pandas>=2.0.0 \
        matplotlib>=3.7.0 \
        seaborn>=0.12.0

    # Essential utilities
    pip install --no-cache-dir \
        click>=8.0.0 \
        PyYAML>=6.0.0 \
        requests>=2.28.0 \
        pathlib \
        dataclasses

    # Project management
    pip install --no-cache-dir \
        GitPython>=3.1.0

    # Clean up
    apt-get clean
    rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

%runscript
    exec python "$@"

%environment
    export LC_ALL=C
    export PYTHONUNBUFFERED=1

# EOF
