{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://scitex.ai/schemas/fts/data_info.schema.json",
  "title": "FTS Data Info Schema",
  "description": "Schema for data file metadata (column meanings, units, dtypes, source)",
  "type": "object",
  "required": ["columns"],
  "properties": {
    "source": {
      "type": "object",
      "description": "Original data source information",
      "properties": {
        "path": {"type": "string"},
        "sha256": {"type": "string", "pattern": "^[a-f0-9]{64}$"},
        "created_at": {"type": "string", "format": "date-time"},
        "description": {"type": "string"}
      }
    },
    "format": {
      "type": "object",
      "properties": {
        "type": {"type": "string", "enum": ["csv", "tsv", "parquet", "json"]},
        "encoding": {"type": "string", "default": "utf-8"},
        "delimiter": {"type": "string", "default": ","},
        "header_row": {"type": "integer", "default": 0}
      }
    },
    "shape": {
      "type": "object",
      "properties": {
        "rows": {"type": "integer", "minimum": 0},
        "columns": {"type": "integer", "minimum": 0}
      }
    },
    "columns": {
      "type": "array",
      "description": "Column definitions",
      "items": {
        "type": "object",
        "required": ["name", "dtype"],
        "properties": {
          "name": {"type": "string"},
          "dtype": {
            "type": "string",
            "enum": ["float64", "int64", "string", "bool", "datetime", "category"]
          },
          "description": {"type": "string"},
          "unit": {"type": "string", "description": "Physical unit (e.g., 'mV', 'ms', 'Hz')"},
          "role": {
            "type": "string",
            "enum": ["x", "y", "group", "subject", "condition", "time", "error", "weight", "other"]
          },
          "missing_count": {"type": "integer", "minimum": 0},
          "unique_count": {"type": "integer", "minimum": 0},
          "min": {"type": "number"},
          "max": {"type": "number"},
          "mean": {"type": "number"},
          "std": {"type": "number"},
          "categories": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Unique values for categorical columns"
          }
        }
      }
    },
    "index": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "dtype": {"type": "string"}
      }
    }
  }
}
