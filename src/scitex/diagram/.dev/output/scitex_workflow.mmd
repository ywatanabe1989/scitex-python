%%{init: {"theme": "base", "themeVariables": {"primaryColor": "#1a2634", "primaryTextColor": "#e0e0e0", "primaryBorderColor": "#3a4a5a", "lineColor": "#5a9fcf"}}}%%
graph LR
    subgraph Creation["Creation"]
        python_code("Python Analysis")
        savefig["scitex.savefig()"]
    end
    subgraph Bundle["Bundle"]
        figz_bundle([".figure Bundle"])
        spec_json["spec.json"]
        data_csv["data.csv"]
        preview["preview.png"]
    end
    subgraph Editing["Editing"]
        editor("Interactive Editor")
        ai_review{"AI Review"}
    end
    subgraph Output["Output"]
        export(["Export PDF/PNG"])
    end
    python_code --> savefig
    savefig --> figz_bundle
    figz_bundle -.-> spec_json
    figz_bundle -.-> data_csv
    figz_bundle -.-> preview
    figz_bundle --> editor
    editor -->|"spec changes"| figz_bundle
    figz_bundle --> ai_review
    ai_review -->|"verified diffs"| figz_bundle
    figz_bundle --> export
    style figz_bundle fill:#0d4a6b,stroke:#5a9fcf,stroke-width:2px
    style preview fill:#f0f0f0,stroke:#999999
    style editor fill:#0d4a6b,stroke:#5a9fcf,stroke-width:2px
    style ai_review fill:#0d4a6b,stroke:#5a9fcf,stroke-width:2px
    style export fill:#ccffcc,stroke:#00cc00
